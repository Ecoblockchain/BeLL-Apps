$(function(){App.Collections.ActivityLog=Backbone.Collection.extend({url:function(){if(this.logDate)return App.Server+'/activitylog/_design/bell/_view/getdocBylogdate?include_docs=true&key="'+this.logDate+'"';return App.Server+'/activitylog/_design/bell/_view/getDocumentByDate?include_docs=true&startkey="'+this.startkey+'"&endkey="'+this.endkey+'"'},setUrl:function(e){this.url=e},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o},model:App.Models.DailyLog})});$(function(){App.Collections.Configurations=Backbone.Collection.extend({url:function(){if(this.u){alert(this.u);return this.u}else{var e=App.Server+"/configurations/_all_docs?include_docs=true";return e}},parse:function(e){var o=[];_.each(e.rows,function(e){if(e.doc._id!="_design/bell"){o.push(e.doc)}});return o},comparator:function(e){var o=e.get("Name");if(o)return o.toLowerCase()},model:App.Models.Configuration})});$(function(){App.Collections.Community=Backbone.Collection.extend({initialize:function(e){if(e){this.url=App.Server+"/community/_all_docs?include_docs=true"+"&limit="+e.limit}else{this.url=App.Server+"/community/_all_docs?include_docs=true"}},setUrl:function(e){this.url=e},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o},comparator:function(e){var o=e.get("Name");if(o)return o.toLowerCase()},model:App.Models.Community})});$(function(){App.Collections.CourseLevels=Backbone.Collection.extend({model:App.Models.CourseStep,url:function(){var e=App.Server+'/coursestep/_design/bell/_view/StepsData?key="'+this.groupId+'"&include_docs=true';return e},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o},comparator:function(e){return e.get("step")}})});$(function(){App.Collections.MailUnopened=Backbone.Collection.extend({initialize:function(e){if(e){if(e.receiverId){this.url=App.Server+'/mail/_design/bell/_view/unopened?key="'+e.receiverId+'"'}else{console.log(e);console.log("unable to find receiverId in MailUnopened Collection")}}},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o}})});$(function(){App.Collections.siteFeedbacks=Backbone.Collection.extend({url:function(){return App.Server+"/report/_design/bell/_view/reportsOnly?limit="+limitofRecords+"&skip="+skip+"&include_docs=true"},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o},comparator:function(e){return-new Date(e.get("time")).getTime()},model:App.Models.report})});$(function(){App.Collections.Reports=Backbone.Collection.extend({model:App.Models.NationReport,url:function(){return App.Server+"/nationreports/_design/bell/_view/allNationReports?include_docs=true"},parse:function(e){var o=[];_.each(e.rows,function(e){o.push(e.doc)});return o}})});$(function(){App.Collections.Publication=Backbone.Collection.extend({model:App.Models.Publication,url:function(){if(this.getlast==true){return App.Server+"/publications/_changes?include_docs=true&descending=true&limit=3"}else if(this.issue){return App.Server+"/publications/_design/bell/_view/publicationIssue?include_docs=true&key="+this.issue}else{return App.Server+"/publications/_design/bell/_view/allPublication?include_docs=true"}},parse:function(e){var o=[];_.each(e.rows,function(e){o.push(e.doc)});return o},comparator:function(e){var o=e.get("IssueNo");if(o)return o}})});$(function(){App.Collections.CourseRequest=Backbone.Collection.extend({model:App.Models.request,url:function(){return App.Server+"/requests/_design/bell/_view/CoursesRequest?include_docs=true"},parse:function(e){var o=[];_.each(e.rows,function(e){o.push(e.doc)});return o}})});$(function(){App.Collections.ResourceRequest=Backbone.Collection.extend({model:App.Models.request,url:function(){return App.Server+"/requests/_design/bell/_view/ResourcesRequest?include_docs=true"},parse:function(e){var o=[];_.each(e.rows,function(e){o.push(e.doc)});return o}})});$(function(){App.Collections.NationReportComments=Backbone.Collection.extend({url:function(){return App.Server+'/nationreports/_design/bell/_view/NationReportComment?key="'+this.NationReportId+'"&include_docs=true'},parse:function(e){var o=_.map(e.rows,function(e){return e.doc});return o},model:App.Models.NationReportComment})});$(function(){App.Collections.Courses=Backbone.Collection.extend({model:App.Models.Group,url:function(){if(this.seachText)return App.Server+"/groups/_design/bell/_view/courseSearch?include_docs=true&key="+this.seachText;else if(this.keys!=undefined)return App.Server+"/groups/_all_docs?include_docs=true&keys=["+this.keys+"]";else return App.Server+"/groups/_all_docs?include_docs=true&limit=20"},parse:function(e){var o=[];_.each(e.rows,function(e){if(e.error!=="not_found"){o.push(e.doc)}});return o},comparator:function(e){var o=e.get("CourseTitle");if(o)return o.toLowerCase()}})});$(function(){App.Collections.Resources=Backbone.Collection.extend({model:App.Models.Resource,url:function(){if(this.keys!="undefined")return App.Server+"/resources/_all_docs?include_docs=true&keys=["+this.keys+"]";else return App.Server+"/resources/_all_docs?include_docs=true"},parse:function(e){var o=[];_.each(e.rows,function(e){o.push(e.doc)});return o},comparator:function(e){var o=e.get("title");if(o)return o.toLowerCase()}})});