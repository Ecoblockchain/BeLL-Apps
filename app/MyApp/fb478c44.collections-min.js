$(function(){App.Collections.listRCollection=Backbone.Collection.extend({url:function(){if(this.skip>=0&&this.startkey!="")return App.Server+'/collectionlist/_design/bell/_view/sortCollection?include_docs=true&startkey="'+this.startkey+'"&limit=20&skip='+this.skip;else if(this.skip==0&&this.startkey=="")return App.Server+"/collectionlist/_design/bell/_view/allrecords?include_docs=true";else if(this.major==true)return App.Server+"/collectionlist/_design/bell/_view/majorcatagory?include_docs=true";else if(this.major==false)return App.Server+"/collectionlist/_design/bell/_view/subcategory?include_docs=true";else return App.Server+"/collectionlist/_design/bell/_view/allrecords?include_docs=true"},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},comparator:function(e){var r=e.get("CollectionName");if(r)return r.toLowerCase()},model:App.Models.CollectionList})});$(function(){App.Collections.Groups=Backbone.Collection.extend({url:function(){if(this.skip!=undefined)return App.Server+"/groups/_all_docs?include_docs=true&limit=20&skip="+this.skip;else return App.Server+"/groups/_all_docs?include_docs=true"},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Group,comparator:function(e){if(e.get("CourseTitle")==undefined){var r=e.get("name");e.set("CourseTitle",r);e.save()}else if(e.get("name")==undefined){var r=e.get("CourseTitle");e.set("name",r);e.save()}else{var r=e.get("CourseTitle")}if(r)return r.toLowerCase()}})});$(function(){App.Collections.coursesteps=Backbone.Collection.extend({url:function(){if(this.getAll){return App.Server+"/coursestep/_all_docs?include_docs=true"}else{return App.Server+'/coursestep/_design/bell/_view/StepsData?key="'+this.courseId+'"&include_docs=true'}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},comparator:function(e){return e.get("step")},model:App.Models.CourseStep})});$(function(){App.Collections.MemberGroups=Backbone.Collection.extend({url:function(){return App.Server+'/groups/_design/bell/_view/GetCourses?key="'+$.cookie("Member._id")+'"&include_docs=true'},parse:function(e){var r=[];var n=this.memberId;var t;for(t=0;t<e.rows.length;t++){r.push(e.rows[t].doc)}return r},model:App.Models.Group,comparator:function(e){var r=e.get("name");if(r)return r.toLowerCase()}})});$(function(){App.Collections.GroupAssignments=Backbone.Collection.extend({url:function(){var e=App.Server+'/assignments/_design/bell/_view/GroupAssignments?key="'+this.groupId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Assignment})});$(function(){App.Collections.NewsResources=Backbone.Collection.extend({model:App.Models.Resource,url:function(){return App.Server+'/resources/_design/bell/_view/NewsResources?include_docs=true&key="News"'},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r},comparator:function(e){var r=new Date(e.get("date"));return-r.getTime()}})});$(function(){App.Collections.Members=Backbone.Collection.extend({url:function(){if(this.login){return App.Server+'/members/_design/bell/_view/MembersByLogin?include_docs=true&key="'+this.login+'"'}else if(this.skip){return App.Server+"/members/_design/bell/_view/Members?include_docs=true&limit=20&skip="+this.skip}else if(this.searchText&&this.searchText!=""){return App.Server+'/members/_design/bell/_view/search?include_docs=true&limit=20&key="'+this.searchText+'"'}else{return App.Server+"/members/_design/bell/_view/Members?include_docs=true"}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},initialize:function(){this.sort_key="lastName"},comparator:function(e,r){e=e.get(this.sort_key);r=r.get(this.sort_key);if(e>r)console.log("before");return e>r?1:e<r?-1:0},model:App.Models.Member})});$(function(){App.Collections.SearchResource=Backbone.Collection.extend({model:App.Models.Resource,url:function(){return App.Server+"/resources/_all_docs?include_docs=true&limit="+limitofRecords+"&skip="+skip},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r}})});$(function(){App.Collections.Calendars=Backbone.Collection.extend({url:App.Server+'/calendar/_design/bell/_view/EventById?key="'+$.cookie("Member._id")+'"&include_docs=true',parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Calendar,comparator:function(e){var r=e.get("title");if(r)return r.toLowerCase()}})});$(function(){App.Collections.siteFeedbacks=Backbone.Collection.extend({url:function(){return App.Server+"/report/_design/bell/_view/reportsOnly?limit="+limitofRecords+"&skip="+skip+"&include_docs=true"},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},comparator:function(e){return-new Date(e.get("time")).getTime()},model:App.Models.report})});$(function(){App.Collections.membercourseprogresses=Backbone.Collection.extend({url:function(){var e=App.Server+'/membercourseprogress/_design/bell/_view/GetMemberCourseResult?key=["'+this.memberId+'","'+this.courseId+'"]&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.membercourseprogress})});$(function(){App.Collections.memberprogressallcourses=Backbone.Collection.extend({url:function(){var e=App.Server+'/membercourseprogress/_design/bell/_view/GetMemberAllCourseResult?key="'+this.memberId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.membercourseprogress})});$(function(){App.Collections.AllInviteMember=Backbone.Collection.extend({url:function(){var e=App.Server+'/invitations/_design/bell/_view/AllInvitesAgainstId?key=["'+this.memberId+'","'+this.entityId+'"]&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Invitation})});$(function(){App.Collections.Mails=Backbone.Collection.extend({initialize:function(e){if(e){if(e.senderId){this.url=App.Server+'/mail/_design/bell/_view/sentbox?include_docs=true&key="'+e.senderId+'"&limit=5&skip='+e.skip}else if(e.receiverId&&e.unread){this.url=App.Server+'/mail/_design/bell/_view/unopen?include_docs=true&key="'+e.receiverId+'"&limit=5&skip='+skip}else if(e.receiverId&&!e.unread){this.url=App.Server+'/mail/_design/bell/_view/inbox?include_docs=true&key="'+e.receiverId+'"&limit=5&skip='+skip}else{this.url=App.Server+"/mail/_all_docs?include_docs=true&limit=5&skip="+skip}}else{this.url=App.Server+"/mail/_all_docs?include_docs=true&limit=5&skip="+skip}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Mail})});$(function(){App.Collections.MailUnopened=Backbone.Collection.extend({initialize:function(e){if(e){if(e.receiverId){this.url=App.Server+'/mail/_design/bell/_view/unopened?key="'+e.receiverId+'"'}else{console.log(e);console.log("unable to find receiverId in MailUnopened Collection")}}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r}})});$(function(){App.Collections.reportsComment=Backbone.Collection.extend({url:function(){return App.Server+'/report/_design/bell/_view/reportsComment?key="'+this.feedbackId+'"&include_docs=true'},parse:function(e){var r=_.map(e.rows,function(e){return e.value});return r},model:App.Models.reportComment})});$(function(){App.Collections.CourseScheduleByCourse=Backbone.Collection.extend({url:function(){var e=App.Server+'/courseschedule/_design/bell/_view/ScheduleByCourseId?key="'+this.courseId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.CourseSchedule})});$(function(){App.Collections.shelfResource=Backbone.Collection.extend({url:function(){if(this.deleteResource==1){return App.Server+'/shelf/_design/bell/_view/getShelfItemWithResourceId?key="'+this.resourceId+'"&include_docs=true'}else if(this.compile){return App.Server+'/shelf/_design/bell/_view/DuplicateDetection?include_docs=true&key="'+$.cookie("Member._id")+'"'}else{return App.Server+'/shelf/_design/bell/_view/getResource?key=["'+this.memberId+'","'+this.resourceId+'"]&include_docs=true'}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Shelf})});$(function(){App.Collections.UserMeetups=Backbone.Collection.extend({url:function(){if(this.memberId&&this.meetupId)return App.Server+'/usermeetups/_design/bell/_view/getUserMeetup?key=["'+this.memberId+'","'+this.meetupId+'"]&include_docs=true';else if(this.memberId)return App.Server+'/usermeetups/_design/bell/_view/getUsermeetups?key="'+this.memberId+'"&include_docs=true';else return App.Server+'/usermeetups/_design/bell/_view/getMeetupUsers?key="'+this.meetupId+'"&include_docs=true'},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.UserMeetup})});$(function(){App.Collections.Configurations=Backbone.Collection.extend({url:function(){if(this.u){alert(this.u);return this.u}else{var e=App.Server+"/configurations/_all_docs?include_docs=true";return e}},parse:function(e){var r=[];_.each(e.rows,function(e){if(e.doc._id!="_design/bell"){r.push(e.doc)}});return r},comparator:function(e){var r=e.get("Name");if(r)return r.toLowerCase()},model:App.Models.Configuration})});$(function(){App.Collections.Resources=Backbone.Collection.extend({model:App.Models.Resource,url:function(){if(this.collectionName){if(this.skip>=0){return App.Server+"/resources/_design/bell/_view/searchView?include_docs=true&limit=25&skip="+this.skip+"&keys="+this.collectionName}else{return App.Server+"/resources/_design/bell/_view/searchView?include_docs=true&keys="+this.collectionName}}else if(this.skip>=0){if(this.startkey&&this.startkey!=""){return App.Server+'/resources/_design/bell/_view/sortresources?include_docs=true&startkey="'+this.startkey+'"&limit=20&skip='+this.skip}else{return App.Server+"/resources/_design/bell/_view/sortresources?include_docs=true&limit=20&skip="+this.skip}}else if(this.title){return App.Server+'/resources/_design/bell/_view/resourceOnTtile?include_docs=true&key="'+this.title+'"'}else if(this.ides){return App.Server+"/resources/_design/bell/_view/resourceName?include_docs=true&keys="+this.resIds}else{return App.Server+"/resources/_all_docs?include_docs=true"}},initialize:function(e){if(e&&e.collectionName){this.collectionName=e.collectionName}else if(e&&e.skip>=0){this.skip=e.skip}},setUrl:function(e){this.url=e},parse:function(e){var r=[];_.each(e.rows,function(e){if(e.doc){r.push(e.doc)}else{r.push(e)}});return r},comparator:function(e){var r=e.get("title");if(r)return r.toLowerCase()}})});$(function(){App.Collections.Apps=Backbone.Collection.extend({model:App.Models.App,url:function(){return App.Server+"/apps/_all_docs?include_docs=true"},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r}})});$(function(){App.Collections.GroupAssignmentsByDate=Backbone.Collection.extend({url:function(){var e=App.Server+'/assignments/_design/bell/_view/GroupAssignmentsByDate?key=["'+this.groupId+'","'+this.startDate+'","'+this.endDate+'"]&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Assignment})});$(function(){App.Collections.AssignmentsByDate=Backbone.Collection.extend({url:function(){var e=App.Server+'/assignments/_design/bell/_view/AssignmentsByDate?key=["'+this.startDate+'","'+this.endDate+'"]&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Assignment})});$(function(){App.Collections.ResourceFeedback=Backbone.Collection.extend({url:function(){var e=App.Server+'/feedback/_design/bell/_view/FeedbackByResourceId?key="'+this.resourceId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Feedback})});$(function(){App.Collections.CourseLevels=Backbone.Collection.extend({model:App.Models.CourseStep,url:function(){var e=App.Server+'/coursestep/_design/bell/_view/StepsData?key="'+this.groupId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},comparator:function(e){return e.get("step")}})});$(function(){App.Collections.SearchCourses=Backbone.Collection.extend({url:function(){return App.Server+"/groups/_all_docs?include_docs=true&limit="+limitofRecords+"&skip="+skip},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r}})});$(function(){App.Collections.StepResultsbyCourse=Backbone.Collection.extend({url:function(){var e;if(this.memberId){e=App.Server+'/membercourseprogress/_design/bell/_view/GetMemberCourseResult?key=["'+this.memberId+'","'+this.courseId+'"]&include_docs=true'}else{e=App.Server+'/membercourseprogress/_design/bell/_view/AllCourses?key="'+this.courseId+'"&include_docs=true'}return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.membercourseprogress})});$(function(){App.Collections.leadermembers=Backbone.Collection.extend({url:App.Server+"/members/_design/bell/_view/Members?include_docs=true",parse:function(e){var r=[];var n=_.map(e.rows,function(e){if(e.doc.roles.length>1||e.doc.roles.indexOf("student")==-1){r.push(e.doc)}});return r},model:App.Models.Member,comparator:function(e){var r=e.get("login");if(r)return r.toLowerCase()}})});$(function(){App.Collections.Requests=Backbone.Collection.extend({initialize:function(e){if(e){this.url=App.Server+'/requests/_design/bell/_view/myRequests?key="'+e.memberId+'"&include_docs=true'}else{this.url=App.Server+"/requests/_all_docs?include_docs=true"}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.request})});$(function(){App.Collections.Communities=Backbone.Collection.extend({url:App.Server+"/community/_all_docs?include_docs=true",parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Community})});$(function(){App.Collections.EntityInvitation=Backbone.Collection.extend({url:function(){var e=App.Server+'/invitations/_design/bell/_view/GetIniviteByEntityId?key="'+this.entityId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Invitation})});$(function(){App.Collections.Requests=Backbone.Collection.extend({initialize:function(e){if(e){this.url=App.Server+'/requests/_design/bell/_view/myRequests?key="'+e.memberId+'"&include_docs=true'}else{this.url=App.Server+"/requests/_all_docs?include_docs=true"}},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.request})});$(function(){App.Collections.courseprogressallmembers=Backbone.Collection.extend({url:function(){var e=App.Server+'/membercourseprogress/_design/bell/_view/GetMemberAllCourseResult?key="'+this.memberId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.membercourseprogress})});$(function(){App.Collections.CommunityReportComments=Backbone.Collection.extend({url:function(){return App.Server+'/communityreports/_design/bell/_view/CommunityReportComment?key="'+this.CommunityReportId+'"&include_docs=true'},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.CommunityReportComment})});$(function(){App.Collections.Reports=Backbone.Collection.extend({model:App.Models.CommunityReport,url:function(){return App.Server+"/communityreports/_design/bell/_view/allCommunityReports?include_docs=true"},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r}})});$(function(){App.Collections.ResourcesFrequency=Backbone.Collection.extend({model:App.Models.ResourceFrequency,url:function(){return App.Server+'/resourcefrequency/_design/bell/_view/memberfrequency?key="'+this.memberID+'"&include_docs=true'},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r}})});$(function(){App.Collections.AssignmentPapers=Backbone.Collection.extend({url:function(){return App.Server+'/assignmentpaper/_design/bell/_view/CourseAssignmentPaperByMember?key=["'+this.senderId+'","'+this.courseId+'"]&include_docs=true'},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Shelf})});$(function(){App.Collections.Meetups=Backbone.Collection.extend({url:function(){if(this.skip)return App.Server+"/meetups/_all_docs?include_docs=true&limit=20&skip="+this.skip;else return App.Server+"/meetups/_all_docs?include_docs=true"},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.Group,comparator:function(e){var r=e.get("title");if(r)return r.toLowerCase()}})});$(function(){App.Collections.listRCollection=Backbone.Collection.extend({url:function(){if(this.skip>=0&&this.startkey!="")return App.Server+'/collectionlist/_design/bell/_view/sortCollection?include_docs=true&startkey="'+this.startkey+'"&limit=20&skip='+this.skip;else if(this.skip==0&&this.startkey=="")return App.Server+"/collectionlist/_design/bell/_view/allrecords?include_docs=true";else if(this.major==true)return App.Server+"/collectionlist/_design/bell/_view/majorcatagory?include_docs=true";else if(this.major==false)return App.Server+"/collectionlist/_design/bell/_view/subcategory?include_docs=true";else return App.Server+"/collectionlist/_design/bell/_view/allrecords?include_docs=true"},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},comparator:function(e){var r=e.get("CollectionName");if(r)return r.toLowerCase()},model:App.Models.CollectionList})});$(function(){App.Collections.Publication=Backbone.Collection.extend({model:App.Models.Publication,url:function(){var e=App.Server+"/publications/_all_docs?include_docs=true&keys=["+this.keys+"]";return e},setUrl:function(e){this.url=e},setKeys:function(e){this.keys=e},parse:function(e){var r=[];_.each(e.rows,function(e){r.push(e.doc)});return r},comparator:function(e){var r=e.get("IssueNo");if(r)return r}})});$(function(){App.Collections.Languages=Backbone.Collection.extend({url:function(){if(this.u){return this.u}else{var e=App.Server+"/languages/_all_docs?include_docs=true";return e}},parse:function(e){var r=[];_.each(e.rows,function(e){if(e.doc._id!="_design/bell"){r.push(e.doc)}});return r},model:App.Models.Language})});$(function(){App.Collections.CourseInvitations=Backbone.Collection.extend({model:App.Models.CourseInvitation,url:function(){var e=App.Server+'/courseinvitations/_design/bell/_view/getCourseInvi?key="'+this.courseId+'"&include_docs=true';return e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r}})});$(function(){App.Collections.ActivityLog=Backbone.Collection.extend({url:function(){if(this.logDate)return App.Server+'/activitylog/_design/bell/_view/getdocBylogdate?include_docs=true&key="'+this.logDate+'"';return App.Server+'/activitylog/_design/bell/_view/getDocumentByDate?include_docs=true&startkey="'+this.startkey+'"&endkey="'+this.endkey+'"'},setUrl:function(e){this.url=e},parse:function(e){var r=_.map(e.rows,function(e){return e.doc});return r},model:App.Models.DailyLog})});